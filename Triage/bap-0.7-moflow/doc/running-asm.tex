\begin{figure}
\begin{minipage}[c]{.45\linewidth}
  \includegraphics{fig/running-example}
  \label{vine:running-example-fig}
\end{minipage}
\begin{scriptsize}
\begin{minipage}[c]{.45\linewidth}
\begin{lstlisting}
// address instr dst, src
0x8048419 push   ebp  // setup stack
0x804841a mov    ebp,esp
0x804841c sub    esp, 0x18
0x804841f lea    eax, [ebp-0x8]
0x8048422 mov    [esp], eax 
0x8048425 call   0x80483f4 // call read
0x804842a mov    eax, [ebp-0x8]
0x804842d and    eax, 0x1  // if i%2==0
0x8048430 test   eax,eax
0x8048432 jne    0x804843f
0x8048434 mov    eax,[ebp-0x8]
0x8048437 add    eax, 0x2  // s := i+2
0x804843a mov    [ebp-0x4], eax
0x804843d jmp    0x8048448
0x804843f mov    eax,[ebp-0x8]
0x8048442 add    eax,0x3  // s := i+3
0x8048445 mov    [ebp-0x4], eax
0x8048448 mov    eax, [ebp-0x4]
0x804844b mov    [esp+0x4], eax
0x804844f mov    eax, [ebp+0x8]
0x8048452 mov    [esp],eax
0x8048455 call   0x8048338 // call realloc
0x804845a mov    [ebp+0x8],eax
0x804845d leave  
0x804845e ret    
\end{lstlisting}
\end{minipage}
\end{scriptsize}
\caption{Our running example from \ref{intro:running} on the  left, and the
  corresponding x86 assembly in Intel syntax on the right.}
\label{fig:running-asm}
\end{figure}

% \begin{figure}
% \begin{scriptsize}
% \begin{minipage}[c]{.45\linewidth}
% \begin{lstlisting}
% 0x8048419 push   ebp
% 0x804841a mov    ebp,esp
% 0x804841c sub    esp, 0x18
% 0x804841f lea    eax, [ebp-0x8]
% 0x8048422 mov    [esp], eax
% 0x8048425 call   0x80483f4
% 0x804842a mov    eax, [ebp-0x8]
% 0x804842d and    eax, 0x1
% 0x8048430 test   eax,eax
% 0x8048432 jne    0x804843f
% 0x8048434 mov    eax,[ebp-0x8]
% 0x8048437 add    eax, 0x2
% \end{lstlisting}
% \end{minipage}
% \begin{minipage}[c]{.45\linewidth}
% \begin{lstlisting}
% 0x804843a mov    [ebp-0x4], eax
% 0x804843d jmp    0x8048448
% 0x804843f mov    eax,[ebp-0x8]
% 0x8048442 add    eax,0x3
% 0x8048445 mov    [ebp-0x4], eax
% 0x8048448 mov    eax, [ebp-0x4]
% 0x804844b mov    [esp+0x4], eax
% 0x804844f mov    eax, [ebp+0x8]
% 0x8048452 mov    [esp],eax
% 0x8048455 call   0x8048338
% 0x804845a mov    [ebp+0x8],eax
% 0x804845d leave  
% 0x804845e ret    
% \end{lstlisting}
% \end{minipage}
% \end{scriptsize}
% \caption{The running example from Figure~\ref{vine:running-example-fig} in
%   Intel-syntax x86 assembly.}
% \label{fig:running-asm}
% \end{figure}

