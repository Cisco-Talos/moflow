<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="root.html">
<link title="Index of modules" rel=Appendix href="root_modules.html">
<link title="Batteries" rel="Chapter" href="Batteries.html"><title>OCaml Batteries Included</title>
</head>
<body>
<center><h1>Installing Batteries Included</h1></center>
<center><h2>The GODI package manager</h2></center>
<p>
At the moment, on most computers, the easiest manner of installing
OCaml Batteries Included on your computer is to take advantage
of <a href="http://godi.camlcity.org/godi/index.html">GODI
</a>, a package manager specifically dedicated to OCaml. You will
first need to install GODI, if GODI isn't install on your machine yet,
then to select package <code>batteries</code> in the list of packages
and accept the decisions of GODI. This should take care of installing
OCaml Batteries Included for you.
</p>
<p>
Note that producing the documentation is long (typically 10-15 minutes).
</p>

<center><h2>Fedora / Debian / Red Hat / Ubuntu</h2></center>
<center>At the time of this writing, this method is experimental.</center>
<p>
On Fedora / Debian / Red Hat / Ubuntu stations,
packages <emph>may</emph> be able for Batteries. If this is the case,
to install OCaml Batteries Included, just run your usual package
manager (generally either Synaptic, Yum, KPackage, Aptitude or
DSelect), and select package <code>libbatteries-ocaml-dev</code>.
This should take care of installing OCaml Batteries Included for you.
</p>

<center><h2>Manually</h2></center>
<p>
To perform installation of OCaml Batteries Included manually, please make sure
that you have already installed all the following tools and libraries:
</p>
<ul>
<li>OCaml itself, version 3.11 or greater</li>
<li>Findlib, version 1.2.5 or greater</li>
<li>Camomile, version 0.7 or greater</li>
<li>GNU Make</li>
<li>OUnit (optional, to run tests)</li>
<li>Ocaml-benchmark (optional, to run benchmarks)</li>
</ul>

<p>
Once all these libraries are installed, you may download and
uncompress the latest version of OCaml Batteries Included, enter the
directory produced by decompression and invoke
<pre>
make all install doc install-doc
</pre>
to build and install both the byte-code version, the native version
and the documentation of OCaml Batteries Included.
</p>

<center><h1>Using Batteries Included</h1></center>
<center><h2>Interactive environment</h2></center>

To use batteries in the ocaml toplevel, open a terminal and write
<code>
ocamlfind batteries/ocaml
</code>, or if you have <code>rlwrap</code> installed,
<code>
rlwrap ocamlfind batteries/ocaml
</code> for readline enabled command editing.


Alternatively, install <code>ocamlinit</code> from the batteries
source directory into your <code>~/.ocamlinit</code> file and launch
ocaml normally
<code>
ocaml
</code>.


<center><h2>Compiling with Batteries</h2></center>
File <a href="../myocamlbuild"><code>doc/batteries/myocamlbuild.ml</code></a>
is an extension of OCamlBuild. It defines <emph>tags</emph>, which you
may use in your projects to specify that your project should take
advantage of the various features of Batteries Included. Copying this
file to your project directory is required to take advantage of these
tags.
<br />
The tags defined by Batteries Included are:
<dl>
<dt>pkg_threads</dt><dd>Allow threading. Required to use module <code>Control.Concurrency.Threads</code>.</dd>
<dt>pkg_batteries</dt> <dd>Use Batteries Included only as a
    library. No language extension is involved.  To use the features
    of Batteries Included with <code>pkg_batteries</code>, you need to
    start your files with <code>open Batteries_uni</code> if not using
    threads or <code>open Batteries</code> if using threads.</dd>
<dt>pkg_batteries.syntax</dt> <dd>Use Batteries Included libraries
    with the syntax extensions.  To use the library features of
    Batteries Included with <code>pkg_batteries</code>, you need to
    start your files with <code>open Batteries_uni</code> if not using
    threads or <code>open Batteries</code> if using threads.</dd>
</dl>

To take advantage of a tag for a file or a set of files, you need to add this
tag to a speciale file named <code>_tags</code>, placed in the same directory
as your files. For instance, to have <code>my_file.ml</code> compiled with
Batteries Included as a library and <code>my_other_file.ml</code> compiled
with both the library, the language extensions and boiler-plate code, your
file <code>_tags</code> should read:
<pre>
&lt;my_file.ml&gt;: pkg_batteries
&lt;my_other_file.ml&gt;: use_batteries,use_boilerplate
</pre>

The order of lines doesn't matter, nor does the order of tags on one line. For
more informations on <code>myocamlbuild.ml</code> and <code>_tags</code>, see
<a href="http://brion.inria.fr/gallium/index.php/Ocamlbuild">the documentation
of OCamlBuild</a>.

<center><h2>More control over compilation</h2></center> During its installation,
Batteries Included creates a set
of <a href="http://projects.camlcity.org/projects/findlib.html">findlib</a>
packages:

<dl>
<dt>batteries</dt> <dd>
The main package for Batteries Included. In turn, this package defines subpackages
   <dt>batteries.pa_comprehension.syntax</dt> <dd>A language extension for list comprehension.</dd>
   <dt>batteries.pa_string.syntax</dt> <dd>A language extension added the ability to declare and pattern-match against new kinds of strings.</dd>
   <dt>batteries.pa_llist.syntax</dt> <dd>A language extension that makes it easier to pattern match against lazy lists.</dd>
</dd>
</dl>

For more information on how to use these packages, please see the documentation of
<a href="http://projects.camlcity.org/projects/findlib.html">findlib</a>.

</body>
</html>
